<!DOCTYPE html>
<html ng-app="app">

  <head>
    <meta charset="utf-8">
    <title>User Management</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/css/bootstrap.min.css">
    <link rel="stylesheet" href="css/style.css">
    
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.6/angular.min.js" charset="utf-8"></script>
   <!-- <script src="js/fetch.js" charset="utf-8"></script> -->

  </head>


  <body ng-controller='MainCtrl' class="container">

    <div class="row form-section">
      <div class="col-md-12">

        <h3>Create new user</h3>
        <form class="form" id="createUser">
          <div class="form row">
            <div class="form-group col-md-3">
              <label>idUser</label>
              <input type="text" class="form-control" name="userId" id="userId"/>
            </div>
            <div class="form-group col-md-6">
              <label>firstName</label>
              <input type="text" class="form-control" name="firstName" id="firstName"/>
            </div>
            <div class="form-group col-md-6">
              <label>lastName</label>
              <input type="text" class="form-control" name="lastName" id="lastName"/>
            </div>
            <div class="form-group col-md-6">
              <label>username</label>
              <input type="text" class="form-control" name="username" id="username"/>
            </div>
          </div>
        <button class="btn btn-success" type="submit">Create</button>
      </form>

<hr>
        <form action="https://mrh8oqh3li.execute-api.eu-central-1.amazonaws.com/prod/user?" method="get">
          <h3>Search user by ID</h3>
          <div class="form-group col-md-6">
              <label>idUser</label>
              <input type="text" class="form-control" name="userId"/>
          </div>
          <button class="btn btn-success" type="submit">Search</button>
        </form>

<hr>
        <form action="https://mrh8oqh3li.execute-api.eu-central-1.amazonaws.com/prod/user?" method="get">
          <h3>Delete user by ID</h3>
          <div class="form-group col-md-6">
              <label>idUser</label>
              <input type="text" class="form-control" name="userId"/>
          </div>
          <button class="btn btn-success" type="submit">Delete</button>
        </form>

<hr>

      </div>
      
    </div>


<script type="text/javascript">
  //CREATE
  const createUser = document.getElementById('createUser');
  createUser.addEventListener('submit', function(e){
    e.preventDefault();

    fetch("https://mrh8oqh3li.execute-api.eu-central-1.amazonaws.com/prod/uploadeventtosqs/", {
      mode: 'no-cors',
      method: "post",
      headers: {
        'Accept': 'application/json',
        'Content-Type': 'application/json'
      },

      body: JSON.stringify({
        "typeEvent": "C",
        "userId": document.getElementById('userId').value,
        "firstName": document.getElementById('firstName').value,
        "lastName": document.getElementById('lastName').value,
        "username": document.getElementById('username').value
      })
    });

    document.getElementById('userId').value = "";
    document.getElementById('firstName').value = "";
    document.getElementById('lastName').value = "";
    document.getElementById('username').value = "";
  });

  //UPDATE
</script>


  </body>
</html>